# ==============================================================================
# Spring Boot WAS Service
# ==============================================================================
# 목적: WAS Pod를 클러스터 내부에서 접근 가능하도록 노출
#
# 주요 설정:
# - type: ClusterIP (클러스터 내부 접근만, 외부는 Ingress 사용)
# - port: 8080 (Service 포트)
# - targetPort: 8080 (Container 포트)
# - selector: app=was (WAS Pod 선택)
# ==============================================================================
apiVersion: v1
kind: Service
metadata:
  name: was-service
  namespace: blog-system
  labels:
    app: was
    tier: backend
spec:
  type: ClusterIP  # 클러스터 내부 접근만 (Ingress가 외부 노출)
  selector:
    app: was  # Deployment의 label과 일치
  ports:
  - name: http
    protocol: TCP
    port: 8080        # Service가 노출하는 포트
    targetPort: 8080  # Container의 포트 (containerPort와 일치)

  # Session Affinity (선택사항)
  # 같은 클라이언트 요청을 같은 Pod로 라우팅
  # sessionAffinity: ClientIP
  # sessionAffinityConfig:
  #   clientIP:
  #     timeoutSeconds: 10800  # 3시간
